!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("d3-selection"),require("d3-shape"),require("d3-scale"),require("d3-axis"),require("d3-time-format"),require("d3-time"),require("d3-zoom")):"function"==typeof define&&define.amd?define(["exports","react","d3-selection","d3-shape","d3-scale","d3-axis","d3-time-format","d3-time","d3-zoom"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).PowerTimeline={},e.React,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3)}(this,function(e,t,n,r,a,i,o,s,l){"use strict";var c,u=Object.defineProperty,d=(e,t,n)=>(((e,t,n)=>{t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),m={exports:{}},f={};var p,h={};
/**
   * @license React
   * react-jsx-runtime.development.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */"production"===process.env.NODE_ENV?m.exports=function(){if(c)return f;c=1;var e=t,n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(e,t,r){var s,l={},c=null,u=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,s)&&!o.hasOwnProperty(s)&&(l[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===l[s]&&(l[s]=t[s]);return{$$typeof:n,type:e,key:c,ref:u,props:l,_owner:i.current}}return f.Fragment=r,f.jsx=s,f.jsxs=s,f}():m.exports=(p||(p=1,"production"!==process.env.NODE_ENV&&function(){var e,n=t,r=Symbol.for("react.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),y=Symbol.iterator,v=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function b(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];!function(e,t,n){var r=v.ReactDebugCurrentFrame.getStackAddendum();""!==r&&(t+="%s",n=n.concat([r]));var a=n.map(function(e){return String(e)});a.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,a)}("error",e,n)}function x(e){return e.displayName||"Context"}function T(e){if(null==e)return null;if("number"==typeof e.tag&&b("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case i:return"Fragment";case a:return"Portal";case s:return"Profiler";case o:return"StrictMode";case d:return"Suspense";case m:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case c:return x(e)+".Consumer";case l:return x(e._context)+".Provider";case u:return function(e,t,n){var r=e.displayName;if(r)return r;var a=t.displayName||t.name||"";return""!==a?n+"("+a+")":n}(e,e.render,"ForwardRef");case f:var t=e.displayName||null;return null!==t?t:T(e.type)||"Memo";case p:var n=e,r=n._payload,h=n._init;try{return T(h(r))}catch(g){return null}}return null}e=Symbol.for("react.module.reference");var k,w,S,j,I,R,C,N=Object.assign,$=0;function E(){}E.__reactDisabledLog=!0;var P,_=v.ReactCurrentDispatcher;function M(e,t,n){if(void 0===P)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);P=r&&r[1]||""}return"\n"+P+e}var O,D=!1,z="function"==typeof WeakMap?WeakMap:Map;function F(e,t){if(!e||D)return"";var n,r=O.get(e);if(void 0!==r)return r;D=!0;var a,i=Error.prepareStackTrace;Error.prepareStackTrace=void 0,a=_.current,_.current=null,function(){if(0===$){k=console.log,w=console.info,S=console.warn,j=console.error,I=console.group,R=console.groupCollapsed,C=console.groupEnd;var e={configurable:!0,enumerable:!0,value:E,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}$++}();try{if(t){var o=function(){throw Error()};if(Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(o,[])}catch(p){n=p}Reflect.construct(e,[],o)}else{try{o.call()}catch(p){n=p}e.call(o.prototype)}}else{try{throw Error()}catch(p){n=p}e()}}catch(h){if(h&&n&&"string"==typeof h.stack){for(var s=h.stack.split("\n"),l=n.stack.split("\n"),c=s.length-1,u=l.length-1;c>=1&&u>=0&&s[c]!==l[u];)u--;for(;c>=1&&u>=0;c--,u--)if(s[c]!==l[u]){if(1!==c||1!==u)do{if(c--,--u<0||s[c]!==l[u]){var d="\n"+s[c].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),"function"==typeof e&&O.set(e,d),d}}while(c>=1&&u>=0);break}}}finally{D=!1,_.current=a,function(){if(0===--$){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:N({},e,{value:k}),info:N({},e,{value:w}),warn:N({},e,{value:S}),error:N({},e,{value:j}),group:N({},e,{value:I}),groupCollapsed:N({},e,{value:R}),groupEnd:N({},e,{value:C})})}$<0&&b("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=i}var m=e?e.displayName||e.name:"",f=m?M(m):"";return"function"==typeof e&&O.set(e,f),f}function L(e,t,n){if(null==e)return"";if("function"==typeof e)return F(e,!(!(r=e.prototype)||!r.isReactComponent));var r;if("string"==typeof e)return M(e);switch(e){case d:return M("Suspense");case m:return M("SuspenseList")}if("object"==typeof e)switch(e.$$typeof){case u:return F(e.render,!1);case f:return L(e.type,t,n);case p:var a=e,i=a._payload,o=a._init;try{return L(o(i),t,n)}catch(s){}}return""}O=new z;var A=Object.prototype.hasOwnProperty,W={},H=v.ReactDebugCurrentFrame;function B(e){if(e){var t=e._owner,n=L(e.type,e._source,t?t.type:null);H.setExtraStackFrame(n)}else H.setExtraStackFrame(null)}var U=Array.isArray;function Z(e){return U(e)}function q(e){return""+e}function V(e){if(function(e){try{return q(e),!1}catch(t){return!0}}(e))return b("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",function(e){return"function"==typeof Symbol&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object"}(e)),q(e)}var X,K,Y,J=v.ReactCurrentOwner,G={key:!0,ref:!0,__self:!0,__source:!0};function Q(e,t,n,a,i){var o,s={},l=null,c=null;for(o in void 0!==n&&(V(n),l=""+n),function(e){if(A.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}(t)&&(V(t.key),l=""+t.key),function(e){if(A.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}(t)&&(c=t.ref,function(e,t){if("string"==typeof e.ref&&J.current&&t&&J.current.stateNode!==t){var n=T(J.current.type);Y[n]||(b('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',T(J.current.type),e.ref),Y[n]=!0)}}(t,i)),t)A.call(t,o)&&!G.hasOwnProperty(o)&&(s[o]=t[o]);if(e&&e.defaultProps){var u=e.defaultProps;for(o in u)void 0===s[o]&&(s[o]=u[o])}if(l||c){var d="function"==typeof e?e.displayName||e.name||"Unknown":e;l&&function(e,t){var n=function(){X||(X=!0,b("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"key",{get:n,configurable:!0})}(s,d),c&&function(e,t){var n=function(){K||(K=!0,b("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"ref",{get:n,configurable:!0})}(s,d)}return function(e,t,n,a,i,o,s){var l={$$typeof:r,type:e,key:t,ref:n,props:s,_owner:o,_store:{}};return Object.defineProperty(l._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(l,"_self",{configurable:!1,enumerable:!1,writable:!1,value:a}),Object.defineProperty(l,"_source",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.freeze&&(Object.freeze(l.props),Object.freeze(l)),l}(e,l,c,i,a,J.current,s)}Y={};var ee,te=v.ReactCurrentOwner,ne=v.ReactDebugCurrentFrame;function re(e){if(e){var t=e._owner,n=L(e.type,e._source,t?t.type:null);ne.setExtraStackFrame(n)}else ne.setExtraStackFrame(null)}function ae(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}function ie(){if(te.current){var e=T(te.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}ee=!1;var oe={};function se(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var n=function(e){var t=ie();if(!t){var n="string"==typeof e?e:e.displayName||e.name;n&&(t="\n\nCheck the top-level render call using <"+n+">.")}return t}(t);if(!oe[n]){oe[n]=!0;var r="";e&&e._owner&&e._owner!==te.current&&(r=" It was passed a child from "+T(e._owner.type)+"."),re(e),b('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',n,r),re(null)}}}function le(e,t){if("object"==typeof e)if(Z(e))for(var n=0;n<e.length;n++){var r=e[n];ae(r)&&se(r,t)}else if(ae(e))e._store&&(e._store.validated=!0);else if(e){var a=function(e){if(null===e||"object"!=typeof e)return null;var t=y&&e[y]||e["@@iterator"];return"function"==typeof t?t:null}(e);if("function"==typeof a&&a!==e.entries)for(var i,o=a.call(e);!(i=o.next()).done;)ae(i.value)&&se(i.value,t)}}function ce(e){var t,n=e.type;if(null!=n&&"string"!=typeof n){if("function"==typeof n)t=n.propTypes;else{if("object"!=typeof n||n.$$typeof!==u&&n.$$typeof!==f)return;t=n.propTypes}if(t){var r=T(n);!function(e,t,n,r,a){var i=Function.call.bind(A);for(var o in e)if(i(e,o)){var s=void 0;try{if("function"!=typeof e[o]){var l=Error((r||"React class")+": "+n+" type `"+o+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[o]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw l.name="Invariant Violation",l}s=e[o](t,o,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(c){s=c}!s||s instanceof Error||(B(a),b("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,o,typeof s),B(null)),s instanceof Error&&!(s.message in W)&&(W[s.message]=!0,B(a),b("Failed %s type: %s",n,s.message),B(null))}}(t,e.props,"prop",r,e)}else void 0===n.PropTypes||ee||(ee=!0,b("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",T(n)||"Unknown"));"function"!=typeof n.getDefaultProps||n.getDefaultProps.isReactClassApproved||b("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var ue={};function de(t,n,a,h,y,v){var x=function(t){return"string"==typeof t||"function"==typeof t||t===i||t===s||t===o||t===d||t===m||t===g||"object"==typeof t&&null!==t&&(t.$$typeof===p||t.$$typeof===f||t.$$typeof===l||t.$$typeof===c||t.$$typeof===u||t.$$typeof===e||void 0!==t.getModuleId)}(t);if(!x){var k="";(void 0===t||"object"==typeof t&&null!==t&&0===Object.keys(t).length)&&(k+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var w,S=function(e){return void 0!==e?"\n\nCheck your code at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+".":""}(y);k+=S||ie(),null===t?w="null":Z(t)?w="array":void 0!==t&&t.$$typeof===r?(w="<"+(T(t.type)||"Unknown")+" />",k=" Did you accidentally export a JSX literal instead of a component?"):w=typeof t,b("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",w,k)}var j=Q(t,n,a,y,v);if(null==j)return j;if(x){var I=n.children;if(void 0!==I)if(h)if(Z(I)){for(var R=0;R<I.length;R++)le(I[R],t);Object.freeze&&Object.freeze(I)}else b("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else le(I,t)}if(A.call(n,"key")){var C=T(t),N=Object.keys(n).filter(function(e){return"key"!==e}),$=N.length>0?"{key: someKey, "+N.join(": ..., ")+": ...}":"{key: someKey}";ue[C+$]||(b('A props object containing a "key" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />',$,C,N.length>0?"{"+N.join(": ..., ")+": ...}":"{}",C),ue[C+$]=!0)}return t===i?function(e){for(var t=Object.keys(e.props),n=0;n<t.length;n++){var r=t[n];if("children"!==r&&"key"!==r){re(e),b("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",r),re(null);break}}null!==e.ref&&(re(e),b("Invalid attribute `ref` supplied to `React.Fragment`."),re(null))}(j):ce(j),j}var me=function(e,t,n){return de(e,t,n,!1)},fe=function(e,t,n){return de(e,t,n,!0)};h.Fragment=i,h.jsx=me,h.jsxs=fe}()),h);var g=m.exports;function y(e){const t=e.label?.text||`Item ${e.id}`;switch(e.type){case"curve":return`${t}, curve with ${e.dataPoints.length} data points`;case"event":return`${t}, event at ${e.time.toLocaleString()}`;case"time-range":return`${t}, time range from ${e.startTime.toLocaleString()} to ${e.endTime.toLocaleString()}, duration ${x(e.endTime.getTime()-e.startTime.getTime())}`;default:return t}}function v(e,t){return`${e.label||`Lane ${e.id}`}, contains ${t} items`}function b(e,t,n){return`Timeline with ${e.length} lanes and ${t.length} items, showing data from ${n.start.toLocaleString()} to ${n.end.toLocaleString()}. Use arrow keys to navigate, plus and minus keys to zoom.`}function x(e){const t=Math.floor(e/1e3),n=Math.floor(t/60),r=Math.floor(n/60),a=Math.floor(r/24);return a>0?`${a} day${a>1?"s":""}`:r>0?`${r} hour${r>1?"s":""}`:n>0?`${n} minute${n>1?"s":""}`:`${t} second${t>1?"s":""}`}function T(e){return t=>{switch(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","+","=","-","_","0","Home","End","Enter"," "].includes(t.key)&&t.preventDefault(),t.key){case"ArrowLeft":t.shiftKey?e.onSelectPreviousItem():e.onPanLeft();break;case"ArrowRight":t.shiftKey?e.onSelectNextItem():e.onPanRight();break;case"ArrowUp":e.onSelectPreviousItem();break;case"ArrowDown":e.onSelectNextItem();break;case"+":case"=":e.onZoomIn();break;case"-":case"_":e.onZoomOut();break;case"0":case"Home":e.onResetZoom();break;case"Enter":case" ":e.onActivateSelectedItem()}}}class k{constructor(e){d(this,"focusableElements",[]),d(this,"currentFocusIndex",-1),this.container=e,this.updateFocusableElements()}updateFocusableElements(){const e=['[tabindex]:not([tabindex="-1"])',"button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[role="button"]:not([aria-disabled="true"])'].join(", ");this.focusableElements=Array.from(this.container.querySelectorAll(e))}focusNext(){return 0!==this.focusableElements.length&&(this.currentFocusIndex=(this.currentFocusIndex+1)%this.focusableElements.length,this.focusableElements[this.currentFocusIndex].focus(),!0)}focusPrevious(){return 0!==this.focusableElements.length&&(this.currentFocusIndex=this.currentFocusIndex<=0?this.focusableElements.length-1:this.currentFocusIndex-1,this.focusableElements[this.currentFocusIndex].focus(),!0)}focusFirst(){return 0!==this.focusableElements.length&&(this.currentFocusIndex=0,this.focusableElements[0].focus(),!0)}getCurrentFocusedElement(){return this.currentFocusIndex>=0?this.focusableElements[this.currentFocusIndex]:null}}class w{constructor(e){d(this,"liveRegion"),this.liveRegion=this.createLiveRegion(),e.appendChild(this.liveRegion)}createLiveRegion(){const e=document.createElement("div");return e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.style.position="absolute",e.style.left="-10000px",e.style.width="1px",e.style.height="1px",e.style.overflow="hidden",e}announce(e,t="polite"){this.liveRegion.setAttribute("aria-live",t),this.liveRegion.textContent=e,setTimeout(()=>{this.liveRegion.textContent=""},1e3)}announceTimeRangeChange(e){const t=e.start.toLocaleString(),n=e.end.toLocaleString();this.announce(`Timeline view changed to show data from ${t} to ${n}`)}announceItemSelection(e){const t=y(e);this.announce(`Selected ${t}`)}announceZoomChange(e){this.announce(`Zoom level changed to ${e}`)}destroy(){this.liveRegion.parentNode&&this.liveRegion.parentNode.removeChild(this.liveRegion)}}function S(e,t){const n=e=>{const t=e.match(/\d+/g);if(!t||t.length<3)return.5;const[n,r,a]=t.map(e=>{const t=parseInt(e)/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)});return.2126*n+.7152*r+.0722*a},r=n(e),a=n(t);return(Math.max(r,a)+.05)/(Math.min(r,a)+.05)}const j={linear:r.curveLinear,step:r.curveStep,basis:r.curveBasis,cardinal:r.curveCardinal},I=({id:e,type:n,laneId:a,dataPoints:i,style:o,interpolation:s="linear",label:l,metadata:c,timeScale:u,laneHeight:d,onItemClick:m,onItemHover:f,isSelected:p=!1,isHovered:h=!1,yScale:v})=>{const{linePath:b,areaPath:x}=t.useMemo(()=>{if(!u||i.length<2)return{linePath:"",areaPath:""};const e=j[s];let t=v;if(!t){const e=i.map(e=>e.value),n=Math.min(...e),r=Math.max(...e)-n;t=r>0?e=>d-(e-n)/r*d*.8-.1*d:()=>d/2}const n=r.line().x(e=>u.scale(e.time)).y(e=>t(e.value)).curve(e),a=o.fillColor?r.area().x(e=>u.scale(e.time)).y0(d).y1(e=>t(e.value)).curve(e):null;return{linePath:n(i)||"",areaPath:a&&a(i)||""}},[i,u,v,d,s,o.fillColor]),T=t.useMemo(()=>y({id:e,type:n,laneId:a,dataPoints:i,style:o,interpolation:s,label:l,metadata:c}),[e,n,a,i,o,s,l,c]);return!u||i.length<2?null:g.jsxs("g",{"data-testid":"curve-item","data-item-id":e,role:"button",tabIndex:0,"aria-label":T,style:{outline:"none",pointerEvents:"none"},className:`curve-item ${p?"selected":""} ${h?"hovered":""}`,children:[o.fillColor&&x&&g.jsx("path",{d:x,fill:o.fillColor,opacity:p||h?1:o.opacity||.15,className:"curve-fill",style:{transition:"all 0.2s ease-in-out",pointerEvents:"none"}}),g.jsx("path",{d:b,fill:"none",stroke:o.strokeColor,strokeWidth:p?(o.strokeWidth||2)+2:h?(o.strokeWidth||2)+1:o.strokeWidth||2,opacity:1,className:"curve-line",style:{transition:"all 0.2s ease-in-out",pointerEvents:"none"}}),i.map((e,t)=>{let n=v;if(!n){const e=i.map(e=>e.value),t=Math.min(...e),r=Math.max(...e)-t;n=r>0?e=>d-(e-t)/r*d*.8-.1*d:()=>d/2}return g.jsx("circle",{cx:u.scale(e.time),cy:n(e.value),r:2,fill:o.strokeColor,opacity:0,className:"curve-point",style:{cursor:m?"pointer":"default"}},t)}),l&&g.jsx("text",{x:u.scale(i[Math.floor(i.length/2)].time),y:"top"===l.position?-5:d+15,textAnchor:"middle",fontSize:l.style?.fontSize||12,fill:l.style?.color||"#333",className:"curve-label",children:l.text})]})},R=({id:e,type:n,laneId:r,time:a,style:i,label:o,metadata:s,timeScale:l,laneHeight:c,onItemClick:u,onItemHover:d,isSelected:m=!1,isHovered:f=!1})=>{const p=t.useMemo(()=>l?l.scale(a):0,[l,a]),h=c/2,v=t.useMemo(()=>y({id:e,type:n,laneId:r,time:a,style:i,label:o,metadata:s}),[e,n,r,a,i,o,s]);return l?g.jsxs("g",{"data-testid":"event-item","data-item-id":e,"data-marker-type":i.markerType,role:"button",tabIndex:0,"aria-label":v,onClick:t=>{t.stopPropagation(),u?.({id:e,type:n,laneId:r,time:a,style:i,label:o,metadata:s},t)},onMouseEnter:t=>{d?.({id:e,type:n,laneId:r,time:a,style:i,label:o,metadata:s},t)},style:{cursor:u?"pointer":"default",outline:"none"},className:`event-item ${m?"selected":""} ${f?"hovered":""}`,transform:"translate(0, 0)",children:[(()=>{const e=m?(i.size||8)+2:f?(i.size||8)+1:i.size||8,t=m?(i.strokeWidth||2)+1:f?(i.strokeWidth||2)+.5:i.strokeWidth||2,n=m?"drop-shadow(0 2px 8px rgba(0, 0, 0, 0.3)) drop-shadow(0 0 4px rgba(0, 0, 0, 0.2))":f?"drop-shadow(0 1px 4px rgba(0, 0, 0, 0.2))":"none",r={fill:i.color,stroke:i.color,strokeWidth:t,opacity:m?1:f?.9:1,className:"event-marker",style:{transition:"all 0.2s ease-in-out",filter:n}};switch(i.markerType){case"line":return g.jsx("line",{x1:p,y1:0,x2:p,y2:c,stroke:i.color,strokeWidth:t,className:"event-marker",style:{transition:"all 0.2s ease-in-out",filter:n}});case"circle":default:return g.jsx("circle",{cx:p,cy:h,r:e,...r});case"triangle":const a=`M${p},${h-e} L${p-e},${h+e} L${p+e},${h+e} Z`;return g.jsx("path",{d:a,...r});case"square":return g.jsx("rect",{x:p-e,y:h-e,width:2*e,height:2*e,...r});case"custom":return i.customSvg?g.jsx("path",{d:i.customSvg,transform:`translate(${p}, ${h})`,...r}):g.jsx("circle",{cx:p,cy:h,r:e,...r})}})(),o&&g.jsx("text",{x:p,y:"top"===o.position?-10:c+15,textAnchor:"middle",fontSize:o.style?.fontSize||12,fill:o.style?.color||"#333",className:"event-label",children:o.text})]}):null},C=({id:e,type:n,laneId:r,startTime:a,endTime:i,style:o,stackLevel:s=0,label:l,metadata:c,timeScale:u,laneHeight:d,onItemClick:m,onItemHover:f,isSelected:p=!1,isHovered:h=!1})=>{const{x:v,width:b,y:x,height:T}=t.useMemo(()=>{if(!u)return{x:0,width:0,y:0,height:0};const e=u.scale(a),t=u.scale(i),n=Math.max(1,t-e),r=Math.min(20,d/4);return{x:e,width:n,y:s*(r+2),height:r}},[u,a,i,s,d]),k=t.useMemo(()=>y({id:e,type:n,laneId:r,startTime:a,endTime:i,style:o,stackLevel:s,label:l,metadata:c}),[e,n,r,a,i,o,s,l,c]);return!u||b<=0?null:g.jsxs("g",{"data-testid":"time-range-item","data-item-id":e,role:"button",tabIndex:0,"aria-label":k,onClick:t=>{t.stopPropagation(),m?.({id:e,type:n,laneId:r,startTime:a,endTime:i,style:o,stackLevel:s,label:l,metadata:c},t)},onMouseEnter:t=>{f?.({id:e,type:n,laneId:r,startTime:a,endTime:i,style:o,stackLevel:s,label:l,metadata:c},t)},style:{cursor:m?"pointer":"default",outline:"none"},className:`time-range-item ${p?"selected":""} ${h?"hovered":""}`,children:[g.jsx("rect",{x:v,y:x,width:b,height:T,fill:o.backgroundColor,stroke:o.borderColor||o.backgroundColor,strokeWidth:p?(o.borderWidth||1)+2:h?(o.borderWidth||1)+1:o.borderWidth||1,opacity:p?.95:h?.85:o.opacity||.7,rx:o.borderRadius||2,ry:o.borderRadius||2,className:"time-range-rect",style:{transition:"all 0.2s ease-in-out",filter:p?"drop-shadow(0 3px 12px rgba(0, 0, 0, 0.4)) drop-shadow(0 1px 6px rgba(0, 0, 0, 0.3))":h?"drop-shadow(0 2px 6px rgba(0, 0, 0, 0.2))":"none"}}),l&&"inline"===l.position&&b>50&&g.jsx("text",{x:v+b/2,y:x+T/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:l.style?.fontSize||11,fill:l.style?.color||"#fff",className:"time-range-label",children:l.text}),l&&"inline"!==l.position&&g.jsx("text",{x:v+b/2,y:"top"===l.position?x-5:x+T+15,textAnchor:"middle",fontSize:l.style?.fontSize||12,fill:l.style?.color||"#333",className:"time-range-label",children:l.text}),m&&(p||h)&&b>20&&g.jsxs(g.Fragment,{children:[g.jsx("rect",{x:v-2,y:x,width:4,height:T,fill:"#007bff",className:"time-range-handle time-range-handle-start",style:{cursor:"ew-resize"}}),g.jsx("rect",{x:v+b-2,y:x,width:4,height:T,fill:"#007bff",className:"time-range-handle time-range-handle-end",style:{cursor:"ew-resize"}})]})]})};function N(e,t){const n=a.scaleTime().domain([e.start,e.end]).range(t);return{domain:[e.start,e.end],range:t,scale:n}}function $(e,t){return t.scale(e)}function E(e,t){return t.scale.invert(e)}function P(e){return e.end.getTime()-e.start.getTime()}function _(e){const t=(e.start.getTime()+e.end.getTime())/2;return new Date(t)}function M(e,t){const n=_(e),r=P(e)*t/2;return{start:new Date(n.getTime()-r),end:new Date(n.getTime()+r)}}function O(e,t){return e.start<t.end&&t.start<e.end}function D(e,t){return e>=t.start&&e<=t.end}function z(e,t){const n=P(e);let r=e.start,a=e.end;if(r<t.start&&(r=t.start,a=new Date(r.getTime()+n)),a>t.end&&(a=t.end,r=new Date(a.getTime()-n)),n>P(t)){const e=_(t),n=P(t)/2;return{start:new Date(e.getTime()-n),end:new Date(e.getTime()+n)}}return{start:r,end:a}}function F(e,t,n=.5){const r=M(t,1+2*n),a=e.filter(e=>L(e,r));return{visibleTimeRange:t,bufferedTimeRange:r,visibleItems:a,totalItems:e.length,renderCount:a.length}}function L(e,t){switch(e.type){case"curve":return function(e,t){if(0===e.dataPoints.length)return!1;const n=e.dataPoints[0],r=e.dataPoints[e.dataPoints.length-1];return O({start:n.time,end:r.time},t)}(e,t);case"event":return function(e,t){return D(e.time,t)}(e,t);case"time-range":return function(e,t){const n={start:e.startTime,end:e.endTime};return O(n,t)}(e,t);default:return!1}}function A(e){const t=new Map;for(const n of e){const e=t.get(n.laneId)||[];e.push(n),t.set(n.laneId,e)}return t}function W(e,t="recent-top"){const n=new Map,r=[...e].sort((e,n)=>"recent-top"===t?n.startTime.getTime()-e.startTime.getTime():"recent-bottom"===t?e.startTime.getTime()-n.startTime.getTime():(e.stackLevel||0)-(n.stackLevel||0)),a=[];for(const i of r){let e=0;for(;e<a.length;){const t=a[e];if(!t||i.startTime>=t.end||i.endTime<=t.start)break;e++}a[e]={start:i.startTime,end:i.endTime},n.set(i.id,e)}return n}function H(e){return 1024*e}function B(e,t=1e3,n=50){const r=e.renderCount<=t,a=H(e.renderCount),i=a<=1024*n*1024,o=[];return r||o.push(`Reduce buffer zone or viewport size. Currently rendering ${e.renderCount} items, target is ${t}.`),i||o.push(`Reduce dataset size or implement more aggressive virtualization. Current memory usage: ${Math.round(a/1024/1024)}MB, target is ${n}MB.`),{renderCountOk:r,memoryUsageOk:i,recommendations:o}}function U(e,n,r=.5){return t.useMemo(()=>F(e,n,r),[e,n.start.getTime(),n.end.getTime(),r])}function Z(e,t,n="linear"){if(0===e.length)return null;if(1===e.length)return e[0].value;const r=t.getTime();let a=null,i=null;for(let o=0;o<e.length-1;o++){const t=e[o],n=e[o+1];if(t.time.getTime()<=r&&n.time.getTime()>=r){a=t,i=n;break}}if(!a&&!i)return r<e[0].time.getTime()?e[0].value:e[e.length-1].value;if(a||(a=e[0]),i||(i=e[e.length-1]),a.time.getTime()===r)return a.value;if(i.time.getTime()===r)return i.value;switch(n){case"step":return a.value;case"linear":default:const e=a.time.getTime(),t=i.time.getTime()-e;if(0===t)return a.value;const n=(r-e)/t;return a.value+(i.value-a.value)*n;case"basis":case"cardinal":const o=a.time.getTime(),s=i.time.getTime()-o;if(0===s)return a.value;const l=(r-o)/s;return a.value+(i.value-a.value)*l}}function q(e,t,n,r=100){if(0===e.length)return null;const a=function(e,t){return t.scale.invert(e)}(t,n);let i=null;for(const o of e){const e=Z(o.dataPoints,a,o.interpolation||"linear");if(null!==e){const t=o.dataPoints.map(e=>e.value),n=Math.min(...t),s=Math.max(...t)-n;let l;if(s>0){l=r-(e-n)/s*r*.8-.1*r}else l=r/2;(!i||l<i.yPosition)&&(i={curveId:o.id,value:e,time:a,yPosition:l})}}return i}const V=({id:e,height:n,style:r,label:a,stackingOrder:i="recent-top",items:o,timeScale:s,viewport:l,onItemClick:c,onItemHover:u})=>{const[d,m]=t.useState(null),[f,p]=t.useState(null),h=function(e,n="recent-top"){return t.useMemo(()=>W(e.filter(e=>"time-range"===e.type),n),[e,n])}(o,i),y=t.useMemo(()=>v({id:e,height:n,style:r,label:a,stackingOrder:i},o.length),[e,n,r,a,i,o.length]),b=t.useMemo(()=>o.filter(e=>"curve"===e.type),[o]),x=t.useCallback(e=>{if(!s||0===b.length)return;const t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,a=q(b.map(e=>({id:e.id,dataPoints:e.dataPoints,interpolation:e.interpolation})),r,s,n);if(a){m(a.curveId);const t=b.find(e=>e.id===a.curveId);if(t&&u){const n={...e,interpolatedValue:a.value,interpolatedTime:a.time,mouseX:r};u(t,n)}}else m(null)},[s,b,u,n]),T=t.useCallback(()=>{m(null)},[]),k=t.useCallback(e=>{if(!s||0===b.length)return;const t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,a=q(b.map(e=>({id:e.id,dataPoints:e.dataPoints,interpolation:e.interpolation})),r,s,n);if(a){p(a.curveId);const t=b.find(e=>e.id===a.curveId);if(t&&c){const n={...e,interpolatedValue:a.value,interpolatedTime:a.time,mouseX:r};c(t,n)}}},[s,b,c]),w=0===o.length;return g.jsxs("div",{"data-testid":"lane","data-lane-id":e,className:"timeline-lane "+(w?"empty":""),style:{position:"relative",width:"100%",height:`${n}px`,backgroundColor:r?.backgroundColor,borderColor:r?.borderColor,borderWidth:r?.borderWidth?`${r.borderWidth}px`:void 0,borderStyle:r?.borderWidth?"solid":void 0,overflow:"hidden"},role:"region","aria-label":y,children:[a&&g.jsx("div",{className:"lane-label",style:{position:"absolute",left:8,top:4,fontSize:"12px",fontWeight:"bold",color:"#666",pointerEvents:"none",zIndex:10},children:a}),g.jsxs("svg",{width:"100%",height:n,style:{position:"absolute",top:0,left:0},className:"lane-svg",onMouseMove:x,onMouseLeave:T,onClick:k,children:[g.jsx("defs",{children:g.jsx("pattern",{id:`grid-${e}`,width:"50",height:"20",patternUnits:"userSpaceOnUse",children:g.jsx("path",{d:"M 50 0 L 0 0 0 20",fill:"none",stroke:"#f0f0f0",strokeWidth:"0.5"})})}),g.jsx("rect",{width:"100%",height:"100%",fill:`url(#grid-${e})`,opacity:.3}),o.sort((e,t)=>{const n="curve"===e.type&&e.isSelected,r="curve"===t.type&&t.isSelected;return n&&!r?1:!n&&r?-1:0}).map((e,t)=>{const r={timeScale:s,laneHeight:n,onItemClick:c,onItemHover:u};switch(e.type){case"curve":return g.jsx(I,{...e,...r,isSelected:f===e.id,isHovered:d===e.id},e.id);case"event":return g.jsx(R,{...e,...r},e.id);case"time-range":const t=h.get(e.id)||0;return g.jsx(C,{...e,...r,stackLevel:t},e.id);default:return null}})]}),w&&g.jsx("div",{"data-testid":"no-data-message",className:"no-data-message",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#999",fontSize:"14px",fontStyle:"italic",pointerEvents:"none"},children:"No data available"}),g.jsx("div",{className:"lane-resize-handle",style:{position:"absolute",bottom:0,left:0,right:0,height:"2px",cursor:"ns-resize",backgroundColor:"transparent"},onMouseDown:e=>{e.preventDefault()}})]})};function X(e,n){return t.useMemo(()=>N(e,n),[e.start.getTime(),e.end.getTime(),n[0],n[1]])}const K=({timeRange:e,width:r,height:a,className:l,style:c})=>{const u=t.useRef(null),d=t.useRef(null),m=X(e,[0,r]),{interval:f,format:p}=t.useMemo(()=>{const t=e.end.getTime()-e.start.getTime();return t<=6e4?{interval:s.timeSecond.every(10),format:o.timeFormat("%H:%M:%S")}:t<=36e5?{interval:s.timeMinute.every(5),format:o.timeFormat("%H:%M")}:t<=864e5?{interval:s.timeHour.every(2),format:o.timeFormat("%H:%M")}:t<=6048e5?{interval:s.timeDay.every(1),format:o.timeFormat("%m/%d")}:t<=2592e6?{interval:s.timeDay.every(Math.ceil(t/6048e5)),format:o.timeFormat("%m/%d")}:t<=31536e6?{interval:s.timeWeek.every(1),format:o.timeFormat("%m/%d")}:{interval:s.timeMonth.every(1),format:o.timeFormat("%b %Y")}},[e,r]);return t.useEffect(()=>{if(!d.current||!f)return;const e=i.axisBottom(m.scale).ticks(f).tickFormat(p);n.select(d.current).call(e).selectAll("text").attr("data-testid","time-label").style("font-size","12px").style("fill","#666"),n.select(d.current).selectAll(".domain").style("stroke","#ccc"),n.select(d.current).selectAll(".tick line").style("stroke","#ccc")},[m,f,p]),g.jsx("svg",{ref:u,"data-testid":"timeline-axis",width:r,height:a,className:l,style:{position:"absolute",bottom:0,left:0,...c},role:"img","aria-label":`Timeline axis showing time from ${e.start.toLocaleString()} to ${e.end.toLocaleString()}`,children:g.jsx("g",{ref:d,transform:"translate(0, 0)"})})},Y=({visible:e,x:t,height:n,style:r={}})=>{if(!e)return null;const{color:a="#666",width:i=1,opacity:o=.7,dashArray:s="2,2"}=r;return g.jsx("line",{x1:t,y1:0,x2:t,y2:n,stroke:a,strokeWidth:i,opacity:o,strokeDasharray:s,pointerEvents:"none",className:"timeline-cursor",style:{transition:"x1 0.05s ease-out, x2 0.05s ease-out"}})};function J(e,r,i,o={}){const{minScale:s=.1,maxScale:c=100,minDuration:u=1e3,maxDuration:d=31536e6,enableTouch:m=!0,enableWheel:f=!0,enableDrag:p=!0}=o,[h,g]=t.useState(e),y=t.useRef(null),v=t.useRef(null);t.useEffect(()=>{const e=l.zoom().scaleExtent([s,c]).on("zoom",e=>{const{transform:t}=e;b(t)});m||e.touchable(()=>!1),f||e.wheelDelta(()=>0),p||e.on("start drag",null),y.current=e},[s,c,m,f,p]);const b=t.useCallback(t=>{const{k:n,x:o}=t,s=P(e),l=Math.max(u,Math.min(d,s/n)),c=a.scaleTime().domain([e.start,e.end]).range([0,i]).invert(-o/n),m=new Date(c.getTime()+l);let f={start:c,end:m};f=z(f,{start:new Date(e.start.getTime()-d),end:new Date(e.end.getTime()+d)}),g(f),r(f)},[e,i,u,d,r]),x=t.useCallback((e,t)=>{b({k:e,x:t,y:0})},[b]),T=t.useCallback(()=>{const e=M(h,.5);g(e),r(e)},[h,r]),k=t.useCallback(()=>{const e=M(h,2);g(e),r(e)},[h,r]),w=t.useCallback(()=>{g(e),r(e),y.current&&v.current&&n.select(v.current).call(y.current.transform,l.zoomIdentity)},[e,r]),S=t.useCallback(e=>{g(e),r(e)},[r]);return t.useEffect(()=>{g(e)},[e.start.getTime(),e.end.getTime()]),{currentTimeRange:h,zoomBehavior:y.current,applyZoom:x,zoomIn:T,zoomOut:k,resetZoom:w,zoomToFit:S}}const G=t.forwardRef(({lanes:e,items:r,initialTimeRange:a,onViewChange:i,onItemClick:o,onItemHover:s,width:l,height:c,bufferZone:u=.5,className:d,style:m,ariaLabel:f},p)=>{const h=t.useRef(null),[y,v]=t.useState(a),[x,S]=t.useState(null),[j,I]=t.useState(null),[R,C]=t.useState(null),[N,$]=t.useState({visible:!1,x:0}),E=X(y,[0,l]),{virtualizationState:P,performanceMetrics:_,itemsByLane:M}=function(e,n,r=.5,a=1e3,i=50){const o=U(e,n,r),s=t.useMemo(()=>B(o,a,i),[o,a,i]),l=t.useMemo(()=>A(o.visibleItems),[o.visibleItems]);return{virtualizationState:o,performanceMetrics:s,itemsByLane:l}}(r,y,u),{currentTimeRange:O,zoomBehavior:D,zoomIn:z,zoomOut:F,resetZoom:L,zoomToFit:W}=J(a,H,l,{enableTouch:!0,enableWheel:!0,enableDrag:!0});function H(e){v(e),i(e),R?.announceTimeRangeChange(e)}t.useEffect(()=>{if(h.current&&D){n.select(h.current).call(D)}},[D]);const Z=t.useCallback((e,t)=>{S(e.id),o?.(e,t),R?.announceItemSelection(e)},[o,R]),q=t.useCallback((e,t)=>{s?.(e,t)},[s]),G=t.useCallback(e=>{if(h.current){const t=h.current.getBoundingClientRect(),n=e.clientX-t.left;$({visible:!0,x:n})}},[]),Q=t.useCallback(()=>{$({visible:!1,x:0})},[]),ee=T({onPanLeft:()=>{const e=.1*(y.end.getTime()-y.start.getTime());H({start:new Date(y.start.getTime()-e),end:new Date(y.end.getTime()-e)})},onPanRight:()=>{const e=.1*(y.end.getTime()-y.start.getTime());H({start:new Date(y.start.getTime()+e),end:new Date(y.end.getTime()+e)})},onZoomIn:()=>z?.(),onZoomOut:()=>F?.(),onResetZoom:()=>L?.(),onSelectNextItem:()=>{j?.focusNext()},onSelectPreviousItem:()=>{j?.focusPrevious()},onActivateSelectedItem:()=>{const e=j?.getCurrentFocusedElement();e&&e.click()}});t.useEffect(()=>{if(h.current){const e=new k(h.current),t=new w(h.current);return I(e),C(t),()=>{t.destroy()}}},[]),t.useEffect(()=>{j?.updateFocusableElements()},[P.visibleItems,j]),t.useImperativeHandle(p,()=>({getTimeRange:()=>y,setTimeRange:e=>{H(e)},zoomToFit:()=>{if(0===r.length)return;let e=new Date,t=new Date;r.forEach(n=>{switch(n.type){case"event":n.time<e&&(e=n.time),n.time>t&&(t=n.time);break;case"time-range":n.startTime<e&&(e=n.startTime),n.endTime>t&&(t=n.endTime);break;case"curve":n.dataPoints.forEach(n=>{n.time<e&&(e=n.time),n.time>t&&(t=n.time)})}}),W?.({start:e,end:t})},getViewport:()=>({timeRange:y,pixelRange:[0,l],bufferZone:u,visibleItems:P.visibleItems})}),[y,l,u,P.visibleItems,r,W]);const te=e.reduce((e,t)=>e+t.height,0),ne=b(e,r,y);return g.jsxs("div",{ref:h,"data-testid":"power-timeline",className:`power-timeline ${d||""}`,style:{position:"relative",width:`${l}px`,height:`${c}px`,overflow:"hidden",border:"1px solid #ddd",...m},role:"application","aria-label":f||"Interactive timeline","aria-description":ne,tabIndex:0,onKeyDown:ee,"data-total-items":P.totalItems,"data-rendered-items":P.renderCount,children:[!_.renderCountOk&&g.jsxs("div",{className:"performance-warning",style:{position:"absolute",top:4,right:4,background:"#fff3cd",border:"1px solid #ffeaa7",padding:"4px 8px",fontSize:"12px",borderRadius:"4px",zIndex:1e3},children:["⚠️ Performance: ",P.renderCount," items rendered"]}),g.jsxs("div",{className:"lanes-container",style:{position:"relative",width:"100%",height:`${te}px`,overflow:"hidden"},onMouseMove:G,onMouseLeave:Q,children:[e.map(e=>{const t=(M.get(e.id)||[]).map(e=>({...e,isSelected:x===e.id}));return g.jsx(V,{...e,items:t,timeScale:E,viewport:P,onItemClick:Z,onItemHover:q},e.id)}),N.visible&&g.jsx("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:10},children:g.jsx(Y,{visible:N.visible,x:N.x,height:te,style:{color:"#007bff",width:1,opacity:.8,dashArray:"3,3"}})})]}),g.jsx(K,{timeRange:y,width:l,height:40,style:{position:"absolute",bottom:0,left:0}}),g.jsx("div",{id:"timeline-tooltip",className:"timeline-tooltip",style:{position:"absolute",pointerEvents:"none",background:"rgba(0, 0, 0, 0.8)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",zIndex:1e3,opacity:0,transition:"opacity 0.2s"}})]})});G.displayName="PowerTimeline";e.Cursor=Y,e.CurveItem=I,e.EventItem=R,e.FocusManager=k,e.Lane=V,e.PowerTimeline=G,e.ScreenReaderAnnouncer=w,e.TimeRangeItem=C,e.TimelineAxis=K,e.Tooltip=({visible:e,x:t,y:n,item:r,context:a})=>{if(!e||!r)return null;const i=e=>e.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),o={position:"fixed",left:t+8,top:n-8,transform:t>window.innerWidth/2?"translateX(-100%) translateX(-8px)":"none",zIndex:1e3,pointerEvents:"none"};return g.jsx("div",{className:"timeline-tooltip",style:o,children:(()=>{switch(r.type){case"curve":return g.jsxs("div",{className:"tooltip-content",children:[g.jsxs("div",{className:"tooltip-header",children:[g.jsx("div",{className:"tooltip-color-indicator",style:{backgroundColor:r.style?.strokeColor||"#007bff"}}),g.jsx("span",{className:"tooltip-title",children:r.label?.text||`Curve ${r.id}`})]}),void 0!==a?.value&&g.jsx("div",{className:"tooltip-value",children:g.jsx("strong",{children:(e=a.value,Number.isInteger(e)?e.toString():e.toFixed(2))})}),a?.timestamp&&g.jsx("div",{className:"tooltip-time",children:i(a.timestamp)}),a?.isInterpolated&&g.jsx("div",{className:"tooltip-info",children:"Interpolated value"})]});case"event":return g.jsxs("div",{className:"tooltip-content",children:[g.jsxs("div",{className:"tooltip-header",children:[g.jsx("div",{className:"tooltip-color-indicator",style:{backgroundColor:r.style?.color||"#dc3545"}}),g.jsx("span",{className:"tooltip-title",children:r.label?.text||`Event ${r.id}`})]}),g.jsx("div",{className:"tooltip-time",children:i(r.time)}),r.metadata&&g.jsx("div",{className:"tooltip-metadata",children:Object.entries(r.metadata).map(([e,t])=>g.jsxs("div",{className:"tooltip-metadata-item",children:[g.jsxs("span",{className:"tooltip-metadata-key",children:[e,":"]}),g.jsx("span",{className:"tooltip-metadata-value",children:String(t)})]},e))})]});case"time-range":const t=r.endTime.getTime()-r.startTime.getTime(),n=t<6e4?`${Math.round(t/1e3)}s`:t<36e5?`${Math.round(t/6e4)}m`:`${Math.round(t/36e5)}h`;return g.jsxs("div",{className:"tooltip-content",children:[g.jsxs("div",{className:"tooltip-header",children:[g.jsx("div",{className:"tooltip-color-indicator",style:{backgroundColor:r.style?.backgroundColor||"#28a745"}}),g.jsx("span",{className:"tooltip-title",children:r.label?.text||`Range ${r.id}`})]}),g.jsxs("div",{className:"tooltip-time-range",children:[g.jsxs("div",{children:["Start: ",i(r.startTime)]}),g.jsxs("div",{children:["End: ",i(r.endTime)]}),g.jsxs("div",{children:["Duration: ",n]})]}),r.metadata&&g.jsx("div",{className:"tooltip-metadata",children:Object.entries(r.metadata).map(([e,t])=>g.jsxs("div",{className:"tooltip-metadata-item",children:[g.jsxs("span",{className:"tooltip-metadata-key",children:[e,":"]}),g.jsx("span",{className:"tooltip-metadata-value",children:String(t)})]},e))})]});default:return g.jsx("div",{className:"tooltip-content",children:g.jsx("div",{className:"tooltip-title",children:r.id})})}var e})()})},e.calculateStackingLevels=W,e.calculateVisibleItems=F,e.checkPerformanceTargets=B,e.clampTimeRange=z,e.createKeyboardNavigationHandler=T,e.createTimeScale=N,e.createVirtualizationDebouncer=function(e,t=16){let n=null;return(r,a,i)=>{n&&clearTimeout(n),n=setTimeout(()=>{const t=F(r,a,i);e(t)},t)}},e.default=G,e.estimateMemoryUsage=H,e.expandTimeRange=M,e.formatDuration=x,e.generateItemAriaLabel=y,e.generateLaneAriaLabel=v,e.generateTimelineAriaDescription=b,e.getContrastRatio=S,e.getTimeRangeCenter=_,e.getTimeRangeDuration=P,e.groupItemsByLane=A,e.isItemInTimeRange=L,e.meetsWCAGContrast=function(e,t,n="AA"){const r=S(e,t);return"AA"===n?r>=4.5:r>=7},e.optimizeBufferZone=function(e,t,n=.5){const r=Math.min(e/10,2),a=Math.min(t/100,2);return Math.min(n*(1+r+a),2)},e.pixelRangeToTimeRange=function(e,t){return{start:E(e[0],t),end:E(e[1],t)}},e.pixelToTime=E,e.shiftTimeRange=function(e,t){return{start:new Date(e.start.getTime()+t),end:new Date(e.end.getTime()+t)}},e.timeInRange=D,e.timeRangeToPixelRange=function(e,t){return[$(e.start,t),$(e.end,t)]},e.timeRangesOverlap=O,e.timeToPixel=$,e.updateTimeScale=function(e,t,n){const r=t?[t.start,t.end]:e.domain,i=n||e.range;return{domain:r,range:i,scale:a.scaleTime().domain(r).range(i)}},e.useD3Zoom=J,e.useTimeScale=X,e.useVirtualization=U,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
