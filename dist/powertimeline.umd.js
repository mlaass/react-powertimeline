!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("d3-selection"),require("d3-shape"),require("d3-scale"),require("d3-axis"),require("d3-time-format"),require("d3-time"),require("d3-zoom")):"function"==typeof define&&define.amd?define(["exports","react","d3-selection","d3-shape","d3-scale","d3-axis","d3-time-format","d3-time","d3-zoom"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).PowerTimeline={},e.React,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3)}(this,function(e,t,n,r,i,a,o,s,l){"use strict";var c,u=Object.defineProperty,d=(e,t,n)=>((e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),m={exports:{}},f={};var p,h,g={};
/**
   * @license React
   * react-jsx-runtime.development.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */function y(){return p||(p=1,"production"!==process.env.NODE_ENV&&function(){var e=t,n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),h=Symbol.iterator;var y=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];!function(e,t,n){var r=y.ReactDebugCurrentFrame.getStackAddendum();""!==r&&(t+="%s",n=n.concat([r]));var i=n.map(function(e){return String(e)});i.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,i)}("error",e,n)}var b;function x(e){return e.displayName||"Context"}function T(e){if(null==e)return null;if("number"==typeof e.tag&&v("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case i:return"Fragment";case r:return"Portal";case o:return"Profiler";case a:return"StrictMode";case u:return"Suspense";case d:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case l:return x(e)+".Consumer";case s:return x(e._context)+".Provider";case c:return function(e,t,n){var r=e.displayName;if(r)return r;var i=t.displayName||t.name||"";return""!==i?n+"("+i+")":n}(e,e.render,"ForwardRef");case m:var t=e.displayName||null;return null!==t?t:T(e.type)||"Memo";case f:var n=e,p=n._payload,h=n._init;try{return T(h(p))}catch(g){return null}}return null}b=Symbol.for("react.module.reference");var k,w,j,S,R,I,$,C=Object.assign,N=0;function E(){}E.__reactDisabledLog=!0;var M,P=y.ReactCurrentDispatcher;function _(e,t,n){if(void 0===M)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);M=r&&r[1]||""}return"\n"+M+e}var O,D=!1,z="function"==typeof WeakMap?WeakMap:Map;function F(e,t){if(!e||D)return"";var n,r=O.get(e);if(void 0!==r)return r;D=!0;var i,a=Error.prepareStackTrace;Error.prepareStackTrace=void 0,i=P.current,P.current=null,function(){if(0===N){k=console.log,w=console.info,j=console.warn,S=console.error,R=console.group,I=console.groupCollapsed,$=console.groupEnd;var e={configurable:!0,enumerable:!0,value:E,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}N++}();try{if(t){var o=function(){throw Error()};if(Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(o,[])}catch(p){n=p}Reflect.construct(e,[],o)}else{try{o.call()}catch(p){n=p}e.call(o.prototype)}}else{try{throw Error()}catch(p){n=p}e()}}catch(h){if(h&&n&&"string"==typeof h.stack){for(var s=h.stack.split("\n"),l=n.stack.split("\n"),c=s.length-1,u=l.length-1;c>=1&&u>=0&&s[c]!==l[u];)u--;for(;c>=1&&u>=0;c--,u--)if(s[c]!==l[u]){if(1!==c||1!==u)do{if(c--,--u<0||s[c]!==l[u]){var d="\n"+s[c].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),"function"==typeof e&&O.set(e,d),d}}while(c>=1&&u>=0);break}}}finally{D=!1,P.current=i,function(){if(0===--N){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:C({},e,{value:k}),info:C({},e,{value:w}),warn:C({},e,{value:j}),error:C({},e,{value:S}),group:C({},e,{value:R}),groupCollapsed:C({},e,{value:I}),groupEnd:C({},e,{value:$})})}N<0&&v("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=a}var m=e?e.displayName||e.name:"",f=m?_(m):"";return"function"==typeof e&&O.set(e,f),f}function L(e,t,n){if(null==e)return"";if("function"==typeof e)return F(e,!(!(r=e.prototype)||!r.isReactComponent));var r;if("string"==typeof e)return _(e);switch(e){case u:return _("Suspense");case d:return _("SuspenseList")}if("object"==typeof e)switch(e.$$typeof){case c:return F(e.render,!1);case m:return L(e.type,t,n);case f:var i=e,a=i._payload,o=i._init;try{return L(o(a),t,n)}catch(s){}}return""}O=new z;var A=Object.prototype.hasOwnProperty,W={},H=y.ReactDebugCurrentFrame;function U(e){if(e){var t=e._owner,n=L(e.type,e._source,t?t.type:null);H.setExtraStackFrame(n)}else H.setExtraStackFrame(null)}var B=Array.isArray;function Z(e){return B(e)}function q(e){return""+e}function V(e){if(function(e){try{return q(e),!1}catch(t){return!0}}(e))return v("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",function(e){return"function"==typeof Symbol&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object"}(e)),q(e)}var X,Y,K=y.ReactCurrentOwner,J={key:!0,ref:!0,__self:!0,__source:!0};function G(e,t,r,i,a){var o,s={},l=null,c=null;for(o in void 0!==r&&(V(r),l=""+r),function(e){if(A.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}(t)&&(V(t.key),l=""+t.key),function(e){if(A.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}(t)&&(c=t.ref,function(e){"string"==typeof e.ref&&K.current}(t)),t)A.call(t,o)&&!J.hasOwnProperty(o)&&(s[o]=t[o]);if(e&&e.defaultProps){var u=e.defaultProps;for(o in u)void 0===s[o]&&(s[o]=u[o])}if(l||c){var d="function"==typeof e?e.displayName||e.name||"Unknown":e;l&&function(e,t){var n=function(){X||(X=!0,v("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"key",{get:n,configurable:!0})}(s,d),c&&function(e,t){var n=function(){Y||(Y=!0,v("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"ref",{get:n,configurable:!0})}(s,d)}return function(e,t,r,i,a,o,s){var l={$$typeof:n,type:e,key:t,ref:r,props:s,_owner:o,_store:{}};return Object.defineProperty(l._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(l,"_self",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.defineProperty(l,"_source",{configurable:!1,enumerable:!1,writable:!1,value:a}),Object.freeze&&(Object.freeze(l.props),Object.freeze(l)),l}(e,l,c,a,i,K.current,s)}var Q,ee=y.ReactCurrentOwner,te=y.ReactDebugCurrentFrame;function ne(e){if(e){var t=e._owner,n=L(e.type,e._source,t?t.type:null);te.setExtraStackFrame(n)}else te.setExtraStackFrame(null)}function re(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}function ie(){if(ee.current){var e=T(ee.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}Q=!1;var ae={};function oe(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var n=function(e){var t=ie();if(!t){var n="string"==typeof e?e:e.displayName||e.name;n&&(t="\n\nCheck the top-level render call using <"+n+">.")}return t}(t);if(!ae[n]){ae[n]=!0;var r="";e&&e._owner&&e._owner!==ee.current&&(r=" It was passed a child from "+T(e._owner.type)+"."),ne(e),v('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',n,r),ne(null)}}}function se(e,t){if("object"==typeof e)if(Z(e))for(var n=0;n<e.length;n++){var r=e[n];re(r)&&oe(r,t)}else if(re(e))e._store&&(e._store.validated=!0);else if(e){var i=function(e){if(null===e||"object"!=typeof e)return null;var t=h&&e[h]||e["@@iterator"];return"function"==typeof t?t:null}(e);if("function"==typeof i&&i!==e.entries)for(var a,o=i.call(e);!(a=o.next()).done;)re(a.value)&&oe(a.value,t)}}function le(e){var t,n=e.type;if(null!=n&&"string"!=typeof n){if("function"==typeof n)t=n.propTypes;else{if("object"!=typeof n||n.$$typeof!==c&&n.$$typeof!==m)return;t=n.propTypes}if(t){var r=T(n);!function(e,t,n,r,i){var a=Function.call.bind(A);for(var o in e)if(a(e,o)){var s=void 0;try{if("function"!=typeof e[o]){var l=Error((r||"React class")+": "+n+" type `"+o+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[o]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw l.name="Invariant Violation",l}s=e[o](t,o,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(c){s=c}!s||s instanceof Error||(U(i),v("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,o,typeof s),U(null)),s instanceof Error&&!(s.message in W)&&(W[s.message]=!0,U(i),v("Failed %s type: %s",n,s.message),U(null))}}(t,e.props,"prop",r,e)}else if(void 0!==n.PropTypes&&!Q){Q=!0,v("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",T(n)||"Unknown")}"function"!=typeof n.getDefaultProps||n.getDefaultProps.isReactClassApproved||v("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var ce={};function ue(e,t,r,h,g,y){var x=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===o||e===a||e===u||e===d||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===m||e.$$typeof===s||e.$$typeof===l||e.$$typeof===c||e.$$typeof===b||void 0!==e.getModuleId)}(e);if(!x){var k="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(k+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var w;k+=ie(),null===e?w="null":Z(e)?w="array":void 0!==e&&e.$$typeof===n?(w="<"+(T(e.type)||"Unknown")+" />",k=" Did you accidentally export a JSX literal instead of a component?"):w=typeof e,v("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",w,k)}var j=G(e,t,r,g,y);if(null==j)return j;if(x){var S=t.children;if(void 0!==S)if(h)if(Z(S)){for(var R=0;R<S.length;R++)se(S[R],e);Object.freeze&&Object.freeze(S)}else v("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else se(S,e)}if(A.call(t,"key")){var I=T(e),$=Object.keys(t).filter(function(e){return"key"!==e}),C=$.length>0?"{key: someKey, "+$.join(": ..., ")+": ...}":"{key: someKey}";if(!ce[I+C])v('A props object containing a "key" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />',C,I,$.length>0?"{"+$.join(": ..., ")+": ...}":"{}",I),ce[I+C]=!0}return e===i?function(e){for(var t=Object.keys(e.props),n=0;n<t.length;n++){var r=t[n];if("children"!==r&&"key"!==r){ne(e),v("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",r),ne(null);break}}null!==e.ref&&(ne(e),v("Invalid attribute `ref` supplied to `React.Fragment`."),ne(null))}(j):le(j),j}var de=function(e,t,n){return ue(e,t,n,!1)},me=function(e,t,n){return ue(e,t,n,!0)};g.Fragment=i,g.jsx=de,g.jsxs=me}()),g}var v=(h||(h=1,"production"===process.env.NODE_ENV?m.exports=function(){if(c)return f;c=1;var e=t,n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(e,t,r){var s,l={},c=null,u=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,s)&&!o.hasOwnProperty(s)&&(l[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===l[s]&&(l[s]=t[s]);return{$$typeof:n,type:e,key:c,ref:u,props:l,_owner:a.current}}return f.Fragment=r,f.jsx=s,f.jsxs=s,f}():m.exports=y()),m.exports);function b(e){const t=e.label?.text||`Item ${e.id}`;switch(e.type){case"curve":return`${t}, curve with ${e.dataPoints.length} data points`;case"event":return`${t}, event at ${e.time.toLocaleString()}`;case"time-range":return`${t}, time range from ${e.startTime.toLocaleString()} to ${e.endTime.toLocaleString()}, duration ${k(e.endTime.getTime()-e.startTime.getTime())}`;default:return t}}function x(e,t){return`${e.label||`Lane ${e.id}`}, contains ${t} items`}function T(e,t,n){return`Timeline with ${e.length} lanes and ${t.length} items, showing data from ${n.start.toLocaleString()} to ${n.end.toLocaleString()}. Use arrow keys to navigate, plus and minus keys to zoom.`}function k(e){const t=Math.floor(e/1e3),n=Math.floor(t/60),r=Math.floor(n/60),i=Math.floor(r/24);return i>0?`${i} day${i>1?"s":""}`:r>0?`${r} hour${r>1?"s":""}`:n>0?`${n} minute${n>1?"s":""}`:`${t} second${t>1?"s":""}`}function w(e){return t=>{switch(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","+","=","-","_","0","Home","End","Enter"," "].includes(t.key)&&t.preventDefault(),t.key){case"ArrowLeft":t.shiftKey?e.onSelectPreviousItem():e.onPanLeft();break;case"ArrowRight":t.shiftKey?e.onSelectNextItem():e.onPanRight();break;case"ArrowUp":e.onSelectPreviousItem();break;case"ArrowDown":e.onSelectNextItem();break;case"+":case"=":e.onZoomIn();break;case"-":case"_":e.onZoomOut();break;case"0":case"Home":e.onResetZoom();break;case"Enter":case" ":e.onActivateSelectedItem()}}}class j{constructor(e){d(this,"focusableElements",[]),d(this,"currentFocusIndex",-1),this.container=e,this.updateFocusableElements()}updateFocusableElements(){const e=['[tabindex]:not([tabindex="-1"])',"button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[role="button"]:not([aria-disabled="true"])'].join(", ");this.focusableElements=Array.from(this.container.querySelectorAll(e))}focusNext(){return 0!==this.focusableElements.length&&(this.currentFocusIndex=(this.currentFocusIndex+1)%this.focusableElements.length,this.focusableElements[this.currentFocusIndex].focus(),!0)}focusPrevious(){return 0!==this.focusableElements.length&&(this.currentFocusIndex=this.currentFocusIndex<=0?this.focusableElements.length-1:this.currentFocusIndex-1,this.focusableElements[this.currentFocusIndex].focus(),!0)}focusFirst(){return 0!==this.focusableElements.length&&(this.currentFocusIndex=0,this.focusableElements[0].focus(),!0)}getCurrentFocusedElement(){return this.currentFocusIndex>=0?this.focusableElements[this.currentFocusIndex]:null}}class S{constructor(e){d(this,"liveRegion"),this.liveRegion=this.createLiveRegion(),e.appendChild(this.liveRegion)}createLiveRegion(){const e=document.createElement("div");return e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.style.position="absolute",e.style.left="-10000px",e.style.width="1px",e.style.height="1px",e.style.overflow="hidden",e}announce(e,t="polite"){this.liveRegion.setAttribute("aria-live",t),this.liveRegion.textContent=e,setTimeout(()=>{this.liveRegion.textContent=""},1e3)}announceTimeRangeChange(e){const t=e.start.toLocaleString(),n=e.end.toLocaleString();this.announce(`Timeline view changed to show data from ${t} to ${n}`)}announceItemSelection(e){const t=b(e);this.announce(`Selected ${t}`)}announceZoomChange(e){this.announce(`Zoom level changed to ${e}`)}destroy(){this.liveRegion.parentNode&&this.liveRegion.parentNode.removeChild(this.liveRegion)}}function R(e,t){const n=e=>{const t=e.match(/\d+/g);if(!t||t.length<3)return.5;const[n,r,i]=t.map(e=>{const t=parseInt(e)/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)});return.2126*n+.7152*r+.0722*i},r=n(e),i=n(t);return(Math.max(r,i)+.05)/(Math.min(r,i)+.05)}const I={linear:r.curveLinear,step:r.curveStep,basis:r.curveBasis,cardinal:r.curveCardinal},$=({id:e,type:n,laneId:i,dataPoints:a,style:o,interpolation:s="linear",label:l,metadata:c,timeScale:u,laneHeight:d,onItemClick:m,onItemHover:f,isSelected:p=!1,isHovered:h=!1,yScale:g})=>{const{linePath:y,areaPath:x}=t.useMemo(()=>{if(!u||a.length<2)return{linePath:"",areaPath:""};const e=I[s];let t=g;if(!t){const e=a.map(e=>e.value),n=Math.min(...e),r=Math.max(...e)-n;t=r>0?e=>d-(e-n)/r*d*.8-.1*d:()=>d/2}const n=r.line().x(e=>u.scale(e.time)).y(e=>t(e.value)).curve(e),i=o?.fillColor?r.area().x(e=>u.scale(e.time)).y0(d).y1(e=>t(e.value)).curve(e):null;return{linePath:n(a)||"",areaPath:i&&i(a)||""}},[a,u,g,d,s,o?.fillColor]),T=t.useMemo(()=>b({id:e,type:n,dataPoints:a,label:l}),[e,n,i,a,o,s,l,c]);return!u||a.length<2?null:v.jsxs("g",{"data-testid":"curve-item","data-item-id":e,role:"button",tabIndex:0,"aria-label":T,style:{outline:"none",pointerEvents:"none"},className:`curve-item ${p?"selected":""} ${h?"hovered":""}`,children:[o?.fillColor&&x&&v.jsx("path",{d:x,fill:o.fillColor,opacity:p||h?1:o?.opacity||.15,className:"curve-fill",style:{transition:"all 0.2s ease-in-out",pointerEvents:"none"}}),v.jsx("path",{d:y,fill:"none",stroke:o.strokeColor,strokeWidth:p?(o.strokeWidth||2)+2:h?(o.strokeWidth||2)+1:o.strokeWidth||2,opacity:1,className:"curve-line",style:{transition:"all 0.2s ease-in-out",pointerEvents:"none"}}),a.map((e,t)=>{let n=g;if(!n){const e=a.map(e=>e.value),t=Math.min(...e),r=Math.max(...e)-t;n=r>0?e=>d-(e-t)/r*d*.8-.1*d:()=>d/2}return v.jsx("circle",{cx:u.scale(e.time),cy:n(e.value),r:2,fill:o.strokeColor,opacity:0,className:"curve-point",style:{cursor:m?"pointer":"default"}},t)}),l&&v.jsx("text",{x:u.scale(a[Math.floor(a.length/2)].time),y:"top"===l.position?-5:d+15,textAnchor:"middle",fontSize:l.style?.fontSize||12,fill:l.style?.color||"#333",className:"curve-label",children:l.text})]})},C=({id:e,type:n,laneId:r,time:i,style:a,label:o,metadata:s,timeScale:l,laneHeight:c,onItemClick:u,onItemHover:d,isSelected:m=!1,isHovered:f=!1})=>{const p=t.useMemo(()=>l?l.scale(i):0,[l,i]),h=c/2,g=t.useMemo(()=>b({id:e,type:n,time:i,label:o}),[e,n,r,i,a,o,s]);return l?v.jsxs("g",{"data-testid":"event-item","data-item-id":e,"data-marker-type":a.markerType,role:"button",tabIndex:0,"aria-label":g,onClick:t=>{t.stopPropagation(),u?.({id:e,type:n,laneId:r,time:i,style:a,label:o,metadata:s},t)},onMouseEnter:t=>{d?.({id:e,type:n,laneId:r,time:i,style:a,label:o,metadata:s},t)},style:{cursor:u?"pointer":"default",outline:"none"},className:`event-item ${m?"selected":""} ${f?"hovered":""}`,transform:"translate(0, 0)",children:[(()=>{const e=m?(a.size||8)+2:f?(a.size||8)+1:a.size||8,t=m?(a.strokeWidth||2)+1:f?(a.strokeWidth||2)+.5:a.strokeWidth||2,n=m?"drop-shadow(0 2px 8px rgba(0, 0, 0, 0.3)) drop-shadow(0 0 4px rgba(0, 0, 0, 0.2))":f?"drop-shadow(0 1px 4px rgba(0, 0, 0, 0.2))":"none",r={fill:a.color,stroke:a.color,strokeWidth:t,opacity:m?1:f?.9:1,className:"event-marker",style:{transition:"all 0.2s ease-in-out",filter:n}};switch(a.markerType){case"line":return v.jsx("line",{x1:p,y1:0,x2:p,y2:c,stroke:a.color,strokeWidth:t,className:"event-marker",style:{transition:"all 0.2s ease-in-out",filter:n}});case"circle":default:return v.jsx("circle",{cx:p,cy:h,r:e,...r});case"triangle":const i=`M${p},${h-e} L${p-e},${h+e} L${p+e},${h+e} Z`;return v.jsx("path",{d:i,...r});case"square":return v.jsx("rect",{x:p-e,y:h-e,width:2*e,height:2*e,...r});case"diamond":const o=`M${p},${h-e} L${p+e},${h} L${p},${h+e} L${p-e},${h} Z`;return v.jsx("path",{d:o,...r});case"custom":return a.customSvg?v.jsx("path",{d:a.customSvg,transform:`translate(${p}, ${h})`,...r}):v.jsx("circle",{cx:p,cy:h,r:e,...r});case"icon":return a.iconClass?v.jsx("foreignObject",{x:p-e,y:h-e,width:2*e,height:2*e,style:{overflow:"visible",transition:"all 0.2s ease-in-out",filter:n},children:v.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",color:a.color,fontSize:1.5*e+"px"},children:v.jsx("i",{className:a.iconClass})})}):v.jsx("circle",{cx:p,cy:h,r:e,...r});case"image":return a.imageUrl?v.jsx("image",{href:a.imageUrl,x:p-e,y:h-e,width:2*e,height:2*e,preserveAspectRatio:"xMidYMid meet",className:"event-marker event-marker-image",style:{transition:"all 0.2s ease-in-out",filter:n}}):v.jsx("circle",{cx:p,cy:h,r:e,...r});case"svg":return a.customElement?v.jsx("g",{transform:`translate(${p}, ${h})`,style:{transition:"all 0.2s ease-in-out",filter:n},children:a.customElement}):v.jsx("circle",{cx:p,cy:h,r:e,...r})}})(),o&&v.jsx("text",{x:p,y:"top"===o.position?-10:c+15,textAnchor:"middle",fontSize:o.style?.fontSize||12,fill:o.style?.color||"#333",className:"event-label",children:o.text})]}):null},N=({id:e,type:n,laneId:r,startTime:i,endTime:a,style:o,stackLevel:s=0,label:l,metadata:c,timeScale:u,laneHeight:d,onItemClick:m,onItemHover:f,isSelected:p=!1,isHovered:h=!1})=>{const{x:g,width:y,y:x,height:T}=t.useMemo(()=>{if(!u)return{x:0,width:0,y:0,height:0};const e=u.scale(i),t=u.scale(a),n=Math.max(1,t-e),r=Math.min(20,d/4);return{x:e,width:n,y:s*(r+2),height:r}},[u,i,a,s,d]),k=t.useMemo(()=>b({id:e,type:n,startTime:i,endTime:a,label:l}),[e,n,r,i,a,o,s,l,c]);return!u||y<=0?null:v.jsxs("g",{"data-testid":"time-range-item","data-item-id":e,role:"button",tabIndex:0,"aria-label":k,onClick:t=>{t.stopPropagation(),m?.({id:e,type:n,laneId:r,startTime:i,endTime:a,style:o,stackLevel:s,label:l,metadata:c},t)},onMouseEnter:t=>{f?.({id:e,type:n,laneId:r,startTime:i,endTime:a,style:o,stackLevel:s,label:l,metadata:c},t)},style:{cursor:m?"pointer":"default",outline:"none"},className:`time-range-item ${p?"selected":""} ${h?"hovered":""}`,children:[v.jsx("rect",{x:g,y:x,width:y,height:T,fill:o.backgroundColor,stroke:o.borderColor||o.backgroundColor,strokeWidth:p?(o.borderWidth||1)+2:h?(o.borderWidth||1)+1:o.borderWidth||1,opacity:p?.95:h?.85:o.opacity||.7,rx:o.borderRadius||2,ry:o.borderRadius||2,className:"time-range-rect",style:{transition:"all 0.2s ease-in-out",filter:p?"drop-shadow(0 3px 12px rgba(0, 0, 0, 0.4)) drop-shadow(0 1px 6px rgba(0, 0, 0, 0.3))":h?"drop-shadow(0 2px 6px rgba(0, 0, 0, 0.2))":"none"}}),l&&"inline"===l.position&&y>50&&v.jsx("text",{x:g+y/2,y:x+T/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:l.style?.fontSize||11,fill:l.style?.color||"#fff",className:"time-range-label",children:l.text}),l&&"inline"!==l.position&&v.jsx("text",{x:g+y/2,y:"top"===l.position?x-5:x+T+15,textAnchor:"middle",fontSize:l.style?.fontSize||12,fill:l.style?.color||"#333",className:"time-range-label",children:l.text}),m&&(p||h)&&y>20&&v.jsxs(v.Fragment,{children:[v.jsx("rect",{x:g-2,y:x,width:4,height:T,fill:"#007bff",className:"time-range-handle time-range-handle-start",style:{cursor:"ew-resize"}}),v.jsx("rect",{x:g+y-2,y:x,width:4,height:T,fill:"#007bff",className:"time-range-handle time-range-handle-end",style:{cursor:"ew-resize"}})]})]})};function E(e,t){const n=i.scaleTime().domain([e.start,e.end]).range(t);return{domain:[e.start,e.end],range:t,scale:n}}function M(e,t){return t.scale(e)}function P(e,t){return t.scale.invert(e)}function _(e){return e.end.getTime()-e.start.getTime()}function O(e){const t=(e.start.getTime()+e.end.getTime())/2;return new Date(t)}function D(e,t){const n=O(e),r=_(e)*t/2;return{start:new Date(n.getTime()-r),end:new Date(n.getTime()+r)}}function z(e,t){return e.start<t.end&&t.start<e.end}function F(e,t){return e>=t.start&&e<=t.end}function L(e,t){const n=_(e);let r=e.start,i=e.end;if(r<t.start&&(r=t.start,i=new Date(r.getTime()+n)),i>t.end&&(i=t.end,r=new Date(i.getTime()-n)),n>_(t)){const e=O(t),n=_(t)/2;return{start:new Date(e.getTime()-n),end:new Date(e.getTime()+n)}}return{start:r,end:i}}function A(e,t,n=.5){const r=D(t,1+2*n),i=e.filter(e=>W(e,r));return{visibleTimeRange:t,bufferedTimeRange:r,visibleItems:i,totalItems:e.length,renderCount:i.length}}function W(e,t){switch(e.type){case"curve":return function(e,t){if(0===e.dataPoints.length)return!1;const n=e.dataPoints[0],r=e.dataPoints[e.dataPoints.length-1];return z({start:n.time,end:r.time},t)}(e,t);case"event":return function(e,t){return F(e.time,t)}(e,t);case"time-range":return function(e,t){const n={start:e.startTime,end:e.endTime};return z(n,t)}(e,t);default:return!1}}function H(e){const t=new Map;for(const n of e){const e=t.get(n.laneId)||[];e.push(n),t.set(n.laneId,e)}return t}function U(e,t="recent-top"){const n=new Map,r=[...e].sort((e,n)=>"recent-top"===t?n.startTime.getTime()-e.startTime.getTime():"recent-bottom"===t?e.startTime.getTime()-n.startTime.getTime():(e.stackLevel||0)-(n.stackLevel||0)),i=[];for(const a of r){let e=0;for(;e<i.length;){const t=i[e];if(!t||a.startTime>=t.end||a.endTime<=t.start)break;e++}i[e]={start:a.startTime,end:a.endTime},n.set(a.id,e)}return n}function B(e){return 1024*e}function Z(e,t=1e3,n=50){const r=e.renderCount<=t,i=B(e.renderCount),a=i<=1024*n*1024,o=[];return r||o.push(`Reduce buffer zone or viewport size. Currently rendering ${e.renderCount} items, target is ${t}.`),a||o.push(`Reduce dataset size or implement more aggressive virtualization. Current memory usage: ${Math.round(i/1024/1024)}MB, target is ${n}MB.`),{renderCountOk:r,memoryUsageOk:a,recommendations:o}}function q(e,n,r=.5){return t.useMemo(()=>A(e,n,r),[e,n.start.getTime(),n.end.getTime(),r])}function V(e,t,n="linear"){if(0===e.length)return null;if(1===e.length)return e[0].value;const r=t.getTime();let i=null,a=null;for(let o=0;o<e.length-1;o++){const t=e[o],n=e[o+1];if(t.time.getTime()<=r&&n.time.getTime()>=r){i=t,a=n;break}}if(!i&&!a)return r<e[0].time.getTime()?e[0].value:e[e.length-1].value;if(i||(i=e[0]),a||(a=e[e.length-1]),i.time.getTime()===r)return i.value;if(a.time.getTime()===r)return a.value;switch(n){case"step":return i.value;case"linear":default:const e=i.time.getTime(),t=a.time.getTime()-e;if(0===t)return i.value;const n=(r-e)/t;return i.value+(a.value-i.value)*n;case"basis":case"cardinal":const o=i.time.getTime(),s=a.time.getTime()-o;if(0===s)return i.value;const l=(r-o)/s;return i.value+(a.value-i.value)*l}}function X(e,t,n,r=100){if(0===e.length)return null;const i=function(e,t){return t.scale.invert(e)}(t,n);let a=null;for(const o of e){const e=V(o.dataPoints,i,o.interpolation||"linear");if(null!==e){const t=o.dataPoints.map(e=>e.value),n=Math.min(...t),s=Math.max(...t)-n;let l;if(s>0){l=r-(e-n)/s*r*.8-.1*r}else l=r/2;(!a||l<a.yPosition)&&(a={curveId:o.id,value:e,time:i,yPosition:l})}}return a}const Y=({id:e,height:n,style:r,label:i,stackingOrder:a="recent-top",items:o,timeScale:s,viewport:l,onItemClick:c,onItemHover:u})=>{const[d,m]=t.useState(null),[f,p]=t.useState(null),h=function(e,n="recent-top"){return t.useMemo(()=>U(e.filter(e=>"time-range"===e.type),n),[e,n])}(o,a),g=t.useMemo(()=>x({id:e,label:i},o.length),[e,n,r,i,a,o.length]),y=t.useMemo(()=>o.filter(e=>"curve"===e.type),[o]),b=t.useCallback(e=>{if(!s||0===y.length)return;const t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,i=X(y.map(e=>({id:e.id,dataPoints:e.dataPoints,interpolation:e.interpolation})),r,s,n);if(i){m(i.curveId);const t=y.find(e=>e.id===i.curveId);if(t&&u){const n={...e,interpolatedValue:i.value,interpolatedTime:i.time,mouseX:r};u(t,n)}}else m(null)},[s,y,u,n]),T=t.useCallback(()=>{m(null)},[]),k=t.useCallback(e=>{if(!s||0===y.length)return;const t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,i=X(y.map(e=>({id:e.id,dataPoints:e.dataPoints,interpolation:e.interpolation})),r,s,n);if(i){p(i.curveId);const t=y.find(e=>e.id===i.curveId);if(t&&c){const n={...e,interpolatedValue:i.value,interpolatedTime:i.time,mouseX:r};c(t,n)}}},[s,y,c]),w=0===o.length;return v.jsxs("div",{"data-testid":"lane","data-lane-id":e,className:"timeline-lane "+(w?"empty":""),style:{position:"relative",width:"100%",height:`${n}px`,backgroundColor:r?.backgroundColor,borderColor:r?.borderColor,borderWidth:r?.borderWidth?`${r.borderWidth}px`:void 0,borderStyle:r?.borderWidth?"solid":void 0,overflow:"hidden"},role:"region","aria-label":g,children:[i&&v.jsx("div",{className:"lane-label",style:{position:"absolute",left:8,top:4,fontSize:"12px",fontWeight:"bold",color:"#666",pointerEvents:"none",zIndex:10},children:i}),v.jsxs("svg",{width:"100%",height:n,style:{position:"absolute",top:0,left:0},className:"lane-svg",onMouseMove:b,onMouseLeave:T,onClick:k,children:[v.jsx("defs",{children:v.jsx("pattern",{id:`grid-${e}`,width:"50",height:"20",patternUnits:"userSpaceOnUse",children:v.jsx("path",{d:"M 50 0 L 0 0 0 20",fill:"none",stroke:"#f0f0f0",strokeWidth:"0.5"})})}),v.jsx("rect",{width:"100%",height:"100%",fill:`url(#grid-${e})`,opacity:.3}),o.sort((e,t)=>{const n="curve"===e.type&&e.isSelected,r="curve"===t.type&&t.isSelected;return n&&!r?1:!n&&r?-1:0}).map((e,t)=>{const r={timeScale:s,laneHeight:n,onItemClick:c,onItemHover:u};switch(e.type){case"curve":return v.jsx($,{...e,...r,isSelected:f===e.id,isHovered:d===e.id},e.id);case"event":return v.jsx(C,{...e,...r},e.id);case"time-range":const t=h.get(e.id)||0;return v.jsx(N,{...e,...r,stackLevel:t},e.id);default:return null}})]}),w&&v.jsx("div",{"data-testid":"no-data-message",className:"no-data-message",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#999",fontSize:"14px",fontStyle:"italic",pointerEvents:"none"},children:"No data available"}),v.jsx("div",{className:"lane-resize-handle",style:{position:"absolute",bottom:0,left:0,right:0,height:"2px",cursor:"ns-resize",backgroundColor:"transparent"},onMouseDown:e=>{e.preventDefault()}})]})};function K(e,n){return t.useMemo(()=>E(e,n),[e.start.getTime(),e.end.getTime(),n[0],n[1]])}const J=({timeRange:e,width:r,height:i,className:l,style:c})=>{const u=t.useRef(null),d=t.useRef(null),m=K(e,[0,r]),{interval:f,format:p}=t.useMemo(()=>{const t=e.end.getTime()-e.start.getTime();return t<=6e4?{interval:s.timeSecond.every(10),format:o.timeFormat("%H:%M:%S")}:t<=36e5?{interval:s.timeMinute.every(5),format:o.timeFormat("%H:%M")}:t<=864e5?{interval:s.timeHour.every(2),format:o.timeFormat("%H:%M")}:t<=6048e5?{interval:s.timeDay.every(1),format:o.timeFormat("%m/%d")}:t<=2592e6?{interval:s.timeDay.every(Math.ceil(t/6048e5)),format:o.timeFormat("%m/%d")}:t<=31536e6?{interval:s.timeWeek.every(1),format:o.timeFormat("%m/%d")}:{interval:s.timeMonth.every(1),format:o.timeFormat("%b %Y")}},[e,r]);return t.useEffect(()=>{if(!d.current||!f)return;const e=a.axisBottom(m.scale).ticks(f).tickFormat(p);n.select(d.current).call(e).selectAll("text").attr("data-testid","time-label").style("font-size","12px").style("fill","#666"),n.select(d.current).selectAll(".domain").style("stroke","#ccc"),n.select(d.current).selectAll(".tick line").style("stroke","#ccc")},[m,f,p]),v.jsx("svg",{ref:u,"data-testid":"timeline-axis",width:r,height:i,className:l,style:{position:"absolute",bottom:0,left:0,...c},role:"img","aria-label":`Timeline axis showing time from ${e.start.toLocaleString()} to ${e.end.toLocaleString()}`,children:v.jsx("g",{ref:d,transform:"translate(0, 0)"})})},G=({visible:e,x:t,height:n,style:r={}})=>{if(!e)return null;const{color:i="#666",width:a=1,opacity:o=.7,dashArray:s="2,2"}=r;return v.jsx("line",{x1:t,y1:0,x2:t,y2:n,stroke:i,strokeWidth:a,opacity:o,strokeDasharray:s,pointerEvents:"none",className:"timeline-cursor",style:{transition:"x1 0.05s ease-out, x2 0.05s ease-out"}})};function Q(e,r,a,o={}){const{minScale:s=.1,maxScale:c=100,minDuration:u=1e3,maxDuration:d=31536e6,enableTouch:m=!0,enableWheel:f=!0,enableDrag:p=!0}=o,[h,g]=t.useState(e),y=t.useRef(null),v=t.useRef(null);t.useEffect(()=>{const e=l.zoom().scaleExtent([s,c]).on("zoom",e=>{const{transform:t}=e;b(t)});m||e.touchable(()=>!1),f||e.wheelDelta(()=>0),p||e.on("start drag",null),y.current=e},[s,c,m,f,p]);const b=t.useCallback(t=>{const{k:n,x:o}=t,s=_(e),l=Math.max(u,Math.min(d,s/n)),c=i.scaleTime().domain([e.start,e.end]).range([0,a]).invert(-o/n),m=new Date(c.getTime()+l);let f={start:c,end:m};f=L(f,{start:new Date(e.start.getTime()-d),end:new Date(e.end.getTime()+d)}),g(f),r(f)},[e,a,u,d,r]),x=t.useCallback((e,t)=>{b({k:e,x:t,y:0})},[b]),T=t.useCallback(()=>{const e=D(h,.5);g(e),r(e)},[h,r]),k=t.useCallback(()=>{const e=D(h,2);g(e),r(e)},[h,r]),w=t.useCallback(()=>{g(e),r(e),y.current&&v.current&&n.select(v.current).call(y.current.transform,l.zoomIdentity)},[e,r]),j=t.useCallback(e=>{g(e),r(e)},[r]);return t.useEffect(()=>{g(e)},[e.start.getTime(),e.end.getTime()]),{currentTimeRange:h,zoomBehavior:y.current,applyZoom:x,zoomIn:T,zoomOut:k,resetZoom:w,zoomToFit:j}}const ee=t.forwardRef(({lanes:e,items:r,initialTimeRange:i,onViewChange:a,onItemClick:o,onItemHover:s,width:l,height:c,bufferZone:u=.5,className:d,style:m,ariaLabel:f},p)=>{const h=t.useRef(null),[g,y]=t.useState(i),[b,x]=t.useState(null),[k,R]=t.useState(null),[I,$]=t.useState(null),[C,N]=t.useState({visible:!1,x:0}),E=K(g,[0,l]),{virtualizationState:M,performanceMetrics:P,itemsByLane:_}=function(e,n,r=.5,i=1e3,a=50){const o=q(e,n,r),s=t.useMemo(()=>Z(o,i,a),[o,i,a]),l=t.useMemo(()=>H(o.visibleItems),[o.visibleItems]);return{virtualizationState:o,performanceMetrics:s,itemsByLane:l}}(r,g,u),{currentTimeRange:O,zoomBehavior:D,zoomIn:z,zoomOut:F,resetZoom:L,zoomToFit:A}=Q(i,W,l,{enableTouch:!0,enableWheel:!0,enableDrag:!0});function W(e){y(e),a(e),I?.announceTimeRangeChange(e)}t.useEffect(()=>{if(h.current&&D){n.select(h.current).call(D)}},[D]);const U=t.useCallback((e,t)=>{x(e.id),o?.(e,t),I?.announceItemSelection(e)},[o,I]),B=t.useCallback((e,t)=>{s?.(e,t)},[s]),V=t.useCallback(e=>{if(h.current){const t=h.current.getBoundingClientRect(),n=e.clientX-t.left;N({visible:!0,x:n})}},[]),X=t.useCallback(()=>{N({visible:!1,x:0})},[]),ee=w({onPanLeft:()=>{const e=.1*(g.end.getTime()-g.start.getTime());W({start:new Date(g.start.getTime()-e),end:new Date(g.end.getTime()-e)})},onPanRight:()=>{const e=.1*(g.end.getTime()-g.start.getTime());W({start:new Date(g.start.getTime()+e),end:new Date(g.end.getTime()+e)})},onZoomIn:()=>z?.(),onZoomOut:()=>F?.(),onResetZoom:()=>L?.(),onSelectNextItem:()=>{k?.focusNext()},onSelectPreviousItem:()=>{k?.focusPrevious()},onActivateSelectedItem:()=>{const e=k?.getCurrentFocusedElement();e&&e.click()}});t.useEffect(()=>{if(h.current){const e=new j(h.current),t=new S(h.current);return R(e),$(t),()=>{t.destroy()}}},[]),t.useEffect(()=>{k?.updateFocusableElements()},[M.visibleItems,k]),t.useImperativeHandle(p,()=>({getTimeRange:()=>g,setTimeRange:e=>{W(e)},zoomToFit:()=>{if(0===r.length)return;let e=new Date,t=new Date;r.forEach(n=>{switch(n.type){case"event":n.time<e&&(e=n.time),n.time>t&&(t=n.time);break;case"time-range":n.startTime<e&&(e=n.startTime),n.endTime>t&&(t=n.endTime);break;case"curve":n.dataPoints.forEach(n=>{n.time<e&&(e=n.time),n.time>t&&(t=n.time)})}}),A?.({start:e,end:t})},getViewport:()=>({timeRange:g,pixelRange:[0,l],bufferZone:u,visibleItems:M.visibleItems})}),[g,l,u,M.visibleItems,r,A]);const te=e.reduce((e,t)=>e+t.height,0),ne=T(e,r,g);return v.jsxs("div",{ref:h,"data-testid":"power-timeline",className:`power-timeline ${d||""}`,style:{position:"relative",width:`${l}px`,height:`${c}px`,overflow:"hidden",border:"1px solid #ddd",...m},role:"application","aria-label":f||"Interactive timeline","aria-description":ne,tabIndex:0,onKeyDown:ee,"data-total-items":M.totalItems,"data-rendered-items":M.renderCount,children:[!P.renderCountOk&&v.jsxs("div",{className:"performance-warning",style:{position:"absolute",top:4,right:4,background:"#fff3cd",border:"1px solid #ffeaa7",padding:"4px 8px",fontSize:"12px",borderRadius:"4px",zIndex:1e3},children:["⚠️ Performance: ",M.renderCount," items rendered"]}),v.jsxs("div",{className:"lanes-container",style:{position:"relative",width:"100%",height:`${te}px`,overflow:"hidden"},onMouseMove:V,onMouseLeave:X,children:[e.map(e=>{const t=(_.get(e.id)||[]).map(e=>({...e,isSelected:b===e.id}));return v.jsx(Y,{...e,items:t,timeScale:E,viewport:M,onItemClick:U,onItemHover:B},e.id)}),C.visible&&v.jsx("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:10},children:v.jsx(G,{visible:C.visible,x:C.x,height:te,style:{color:"#007bff",width:1,opacity:.8,dashArray:"3,3"}})})]}),v.jsx(J,{timeRange:g,width:l,height:40,style:{position:"absolute",bottom:0,left:0}}),v.jsx("div",{id:"timeline-tooltip",className:"timeline-tooltip",style:{position:"absolute",pointerEvents:"none",background:"rgba(0, 0, 0, 0.8)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",zIndex:1e3,opacity:0,transition:"opacity 0.2s"}})]})});ee.displayName="PowerTimeline";e.Cursor=G,e.CurveItem=$,e.EventItem=C,e.FocusManager=j,e.Lane=Y,e.PowerTimeline=ee,e.ScreenReaderAnnouncer=S,e.TimeRangeItem=N,e.TimelineAxis=J,e.Tooltip=({visible:e,x:t,y:n,item:r,context:i})=>{if(!e||!r)return null;const a=e=>e.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),o={position:"fixed",left:t+8,top:n-8,transform:t>window.innerWidth/2?"translateX(-100%) translateX(-8px)":"none",zIndex:1e3,pointerEvents:"none"};return v.jsx("div",{className:"timeline-tooltip",style:o,children:(()=>{switch(r.type){case"curve":return v.jsxs("div",{className:"tooltip-content",children:[v.jsxs("div",{className:"tooltip-header",children:[v.jsx("div",{className:"tooltip-color-indicator",style:{backgroundColor:r.style?.strokeColor||"#007bff"}}),v.jsx("span",{className:"tooltip-title",children:r.label?.text||`Curve ${r.id}`})]}),void 0!==i?.value&&v.jsx("div",{className:"tooltip-value",children:v.jsx("strong",{children:(e=i.value,Number.isInteger(e)?e.toString():e.toFixed(2))})}),i?.timestamp&&v.jsx("div",{className:"tooltip-time",children:a(i.timestamp)}),i?.isInterpolated&&v.jsx("div",{className:"tooltip-info",children:"Interpolated value"})]});case"event":return v.jsxs("div",{className:"tooltip-content",children:[v.jsxs("div",{className:"tooltip-header",children:[v.jsx("div",{className:"tooltip-color-indicator",style:{backgroundColor:r.style?.color||"#dc3545"}}),v.jsx("span",{className:"tooltip-title",children:r.label?.text||`Event ${r.id}`})]}),v.jsx("div",{className:"tooltip-time",children:a(r.time)}),r.metadata&&v.jsx("div",{className:"tooltip-metadata",children:Object.entries(r.metadata).map(([e,t])=>v.jsxs("div",{className:"tooltip-metadata-item",children:[v.jsxs("span",{className:"tooltip-metadata-key",children:[e,":"]}),v.jsx("span",{className:"tooltip-metadata-value",children:String(t)})]},e))})]});case"time-range":const t=r.endTime.getTime()-r.startTime.getTime(),n=t<6e4?`${Math.round(t/1e3)}s`:t<36e5?`${Math.round(t/6e4)}m`:`${Math.round(t/36e5)}h`;return v.jsxs("div",{className:"tooltip-content",children:[v.jsxs("div",{className:"tooltip-header",children:[v.jsx("div",{className:"tooltip-color-indicator",style:{backgroundColor:r.style?.backgroundColor||"#28a745"}}),v.jsx("span",{className:"tooltip-title",children:r.label?.text||`Range ${r.id}`})]}),v.jsxs("div",{className:"tooltip-time-range",children:[v.jsxs("div",{children:["Start: ",a(r.startTime)]}),v.jsxs("div",{children:["End: ",a(r.endTime)]}),v.jsxs("div",{children:["Duration: ",n]})]}),r.metadata&&v.jsx("div",{className:"tooltip-metadata",children:Object.entries(r.metadata).map(([e,t])=>v.jsxs("div",{className:"tooltip-metadata-item",children:[v.jsxs("span",{className:"tooltip-metadata-key",children:[e,":"]}),v.jsx("span",{className:"tooltip-metadata-value",children:String(t)})]},e))})]});default:return v.jsx("div",{className:"tooltip-content",children:v.jsx("div",{className:"tooltip-title",children:r.id})})}var e})()})},e.calculateStackingLevels=U,e.calculateVisibleItems=A,e.checkPerformanceTargets=Z,e.clampTimeRange=L,e.createKeyboardNavigationHandler=w,e.createTimeScale=E,e.createVirtualizationDebouncer=function(e,t=16){let n=null;return(r,i,a)=>{n&&clearTimeout(n),n=setTimeout(()=>{const t=A(r,i,a);e(t)},t)}},e.default=ee,e.estimateMemoryUsage=B,e.expandTimeRange=D,e.formatDuration=k,e.generateItemAriaLabel=b,e.generateLaneAriaLabel=x,e.generateTimelineAriaDescription=T,e.getContrastRatio=R,e.getTimeRangeCenter=O,e.getTimeRangeDuration=_,e.groupItemsByLane=H,e.isItemInTimeRange=W,e.meetsWCAGContrast=function(e,t,n="AA"){const r=R(e,t);return"AA"===n?r>=4.5:r>=7},e.optimizeBufferZone=function(e,t,n=.5){const r=Math.min(e/10,2),i=Math.min(t/100,2);return Math.min(n*(1+r+i),2)},e.pixelRangeToTimeRange=function(e,t){return{start:P(e[0],t),end:P(e[1],t)}},e.pixelToTime=P,e.shiftTimeRange=function(e,t){return{start:new Date(e.start.getTime()+t),end:new Date(e.end.getTime()+t)}},e.timeInRange=F,e.timeRangeToPixelRange=function(e,t){return[M(e.start,t),M(e.end,t)]},e.timeRangesOverlap=z,e.timeToPixel=M,e.updateTimeScale=function(e,t,n){const r=t?[t.start,t.end]:e.domain,a=n||e.range;return{domain:r,range:a,scale:i.scaleTime().domain(r).range(a)}},e.useD3Zoom=Q,e.useTimeScale=K,e.useVirtualization=q,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
